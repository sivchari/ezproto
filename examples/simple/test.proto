syntax = "proto3";

package example;
option go_package = "github.com/sivchari/ezproto/examples/simple/main";

enum UserStatus {
  UNKNOWN = 0;
  ACTIVE = 1;
  INACTIVE = 2;
  SUSPENDED = 3;
}

enum Priority {
  LOW = 0;
  MEDIUM = 1;
  HIGH = 2;
}

message User {
  int32 id = 1;
  string name = 2;
  string email = 3;
  repeated string tags = 4;
  UserStatus status = 5;
  map<string, string> metadata = 6;
  
  oneof contact_info {
    string phone = 7;
    string slack_id = 8;
  }
}

message CreateUserRequest {
  User user = 1;
  Priority priority = 2;
  map<string, int32> settings = 3;
}

message CreateUserResponse {
  User user = 1;
  string message = 2;
  UserStatus result_status = 3;
}

service UserService {
  rpc CreateUser(CreateUserRequest) returns (CreateUserResponse);
  rpc GetUser(GetUserRequest) returns (User);
  rpc ListUsers(ListUsersRequest) returns (stream User);
}

message GetUserRequest {
  int32 id = 1;
}

message ListUsersRequest {
  int32 limit = 1;
}
